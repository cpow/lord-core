<h1 class="display-4 text-center m-4">Property <%= @property.name %></h1>

<div class="row equal-height text-center">
  <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
    <div class="card property-info">
      <div class="card-body">
        <h4>
          Property Information
        </h4>
        <p>
        <i class="fa fa-bank fa-3x text-primary"></i>
        </p>
        <p>
        </p>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
    <div class="card property-info">
      <div class="card-body">
        <h4>
          Units
        </h4>
        <p>
        <i class="fa fa-bank fa-3x text-primary"></i>
        </p>
        <p>
          You need to add units to this property! Once you add units, you can track them. and whatnot
        </p>
        <%= link_to 'Units', property_units_path(@property), class: 'btn btn-primary' %>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-md-6 col-lg-4 mb-4">
    <div class="card property-info">
      <div class="card-body">
        <h4>
          Residents
        </h4>
        <p>
        <i class="fa fa-bank fa-3x text-primary"></i>
        </p>
        <p>
        This is where you can manage your residents
        </p>
        <%= link_to 'Residents', property_residencies_path(@property), class: 'btn btn-primary' %>
      </div>
    </div>
  </div>
</div>















<div class="card">
  <% if @property.property_images.present? %>
    <div id="carouselControls" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner bg-dark text-center">
        <% @property.property_images.each_with_index do |image, index| %>
          <div class="carousel-item <%= 'active' if index == 0 %>">
            <%= image_tag image.image.url(:large),
              class: 'd-block',
              style: 'margin: 0 auto;height: 400px; max-width: 100%' %>
          </div>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  <% else %>
    <div class="card-header alert-warning text-center">
      <p>
        You have no images for this property
      </p>
      <%= link_to 'Add Images', new_property_property_image_path(@property), class: 'btn btn-warning' %>
    </div>
  <% end %>

  <div class="card-body">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="address-tab" data-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="residents-tab" data-toggle="tab" href="#residents" role="tab" aria-controls="residents" aria-selected="false">Residents</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Contact</a>
      </li>
    </ul>
    <div class="tab-content" id="myTabContent">
      <div class="tab-pane fade show active p-4" id="address" role="tabpanel" aria-labelledby="address-tab">
        <h2>Address Information</h2>
        <p>
          <strong>Address city:</strong>
          <%= @property.address_city %>
        </p>

        <p>
          <strong>Address line1:</strong>
          <%= @property.address_line1 %>
        </p>

        <p>
          <strong>Address state:</strong>
          <%= @property.address_state %>
        </p>

        <p>
          <strong>Address postal:</strong>
          <%= @property.address_postal %>
        </p>

        <p>
          <strong>Name:</strong>
          <%= @property.name %>
        </p>

        <p>
          <strong>Description:</strong>
          <%= @property.description %>
        </p>
      </div>
      <div class="tab-pane fade" id="residents" role="tabpanel" aria-labelledby="residents-tab">
        <% if @property.residencies.present? %>
          <ul>
            <% @property.residencies.each do |resident| %>
                <li><%= resident.user.name %></li>
                <li><%= resident.user.email %></li>
            <% end %>
          </ul>
        <% else %>
          <p>No residents have been set up</p>
          <%= link_to "Invite a resident", new_property_residency_path(@property),
            class: 'btn btn-success'
          %>
        <% end %>
      </div>
      <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
    </div>
    <hr>
    <%= link_to 'Add Unit to this property', new_property_unit_path(@property), class: 'btn btn-primary' %>
    <%= link_to 'New Residency', new_property_residency_path(@property), class: 'btn btn-primary' %>
    <%= link_to 'Add Images', new_property_property_image_path(@property), class: 'btn btn-primary' %>

    <%= link_to 'Edit', edit_property_path(@property) %> |
    <%= link_to 'Back', properties_path %>
  </div>
</div>

<br>

<% if @property.payments %>
  <div class="card">
    <h1 class="card-header">
      Payments
    </h1>
    <div class="card-body">
      <%= render 'shared/payments/table', payments: @property.payments %>
    </div>
  </div>
<% end %>

<br>

<div class="card">
  <h1 class="card-header">Units</h1>
  <div class="card-body">
    <%= render 'units/table', units: @property.units %>
  </div>
</div>

